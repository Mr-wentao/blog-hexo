<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>BLOG - 文涛的博客 - 运维技术分享</title><meta name="author" content="wentao"><meta name="copyright" content="wentao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="致力于分享运维开发等技术经验, 由系统运维、脚本编程、devops等分类组成, 涵盖了Docker、k8s、Python、Linux、Prometheus、ElasticSearch、虚拟化等内容。">
<meta property="og:type" content="website">
<meta property="og:title" content="BLOG">
<meta property="og:url" content="https://blog.vrzbq.com/page/19/">
<meta property="og:site_name" content="BLOG">
<meta property="og:description" content="致力于分享运维开发等技术经验, 由系统运维、脚本编程、devops等分类组成, 涵盖了Docker、k8s、Python、Linux、Prometheus、ElasticSearch、虚拟化等内容。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.vrzbq.com/img/avatar.png">
<meta property="article:author" content="wentao">
<meta property="article:tag" content="Kubernetes,Prometheus,ElasticSearch,OPS,DevOps,运维,Linux,云原生">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.vrzbq.com/img/avatar.png"><link rel="shortcut icon" href="/img/bog.jpg"><link rel="canonical" href="https://blog.vrzbq.com/page/19/"><link rel="preconnect"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?50b516d50102c8c9ac5f80529b81ca17";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-YN0WWZGVYN"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-YN0WWZGVYN');
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"此文章距离发布已经","messageNext":"天了，内容可能已经过时，请自行判断是否可用或联系博主更新。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'BLOG',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-01-11 18:26:54'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="BLOG" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">200</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">185</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page fixed" id="page-header" style="background-image: url('/img/top.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="BLOG"><span class="site-name">BLOG</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">BLOG</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/Mr-wentao/blog-hexo" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/posts/8ea6978b/" title="Linux性能分析"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/images/202211041307268.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux性能分析"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/8ea6978b/" title="Linux性能分析">Linux性能分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-28T07:05:51.000Z" title="发表于 2021-05-28 15:05:51">2021-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/devops/">devops</a></span></div><div class="content">vmstat
间隔1s, 一共5次

1vmstat 1 5

每一列的说明
1234567891011121314151617181920212223242526Procs（进程）:- r: 运行队列中进程数量- b: 等待IO的进程数量Memory（内存）:- swpd: 使用虚拟内存大小- free: 可用内存大小- buff: 用作缓冲的内存大小- cache: 用作缓存的内存大小Swap:- si: 每秒从交换区写到内存的大小- so: 每秒写入交换区的内存大小- IO：（现在的Linux版本块的大小为1024bytes）- bi: 每秒读取的块数- bo: 每秒写入的块数system：- in: 每秒中断数，包括时钟中断- cs: 每秒上下文切换数CPU（以百分比表示）- us: 用户进程执行时间(user time)- sy: 系统进程执行时间(system time)- id: 空闲时间(包括IO等待时间)- wa: 等待IO时间

sar安装1yum  install sysstat

查看物理网卡占用1sar -n DEV 1 5


sar -n 选项使用6个不同 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/25938561/" title="Linux虚拟内存swap"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/images/202211041307268.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux虚拟内存swap"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/25938561/" title="Linux虚拟内存swap">Linux虚拟内存swap</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-27T12:52:22.000Z" title="发表于 2021-05-27 20:52:22">2021-05-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/devops/">devops</a></span></div><div class="content">增加swap(文件)创建swap生成一个空文件（2048M）
12sudo dd if=/dev/zero of=/swapfile bs=1M count=2048sudo chmod 600 /swapfile

标记成swap文件
1sudo mkswap /swapfile

手动挂载swap12345挂载： sudo swapon /swapfile卸载： sudo swapoff /swapfile

开机自动挂载vim /etc/fstab添加一行
1/swapfile   swap  swap  defaults  0  0

删除swap(文件)查看swap文件地址1swapon

手动关闭swap1sudo swapoff /swapfile

删除swap文件1sudo rm -f /swapfile

取消开机自动挂载vim /etc/fstab, 删除包含swapfile的一行
</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/15e02d6d/" title="Python环境打包"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/skeleton2.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python环境打包"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/15e02d6d/" title="Python环境打包">Python环境打包</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-27T11:26:20.000Z" title="发表于 2021-05-27 19:26:20">2021-05-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BC%80%E5%8F%91/">开发</a></span></div><div class="content">为什么要打包公司有个远古项目, 用到的是fabric1.x, 只支持python2版本, 并且对环境要求比较苛刻, 而且代码已经无人维护, 这种情况下将包固定下来, 保证代码可以运行
安装pyenv环境
pyenv官网 https://github.com/pyenv/pyenv，pyenv和其他的虚拟环境不同之处在于它可以安装任意版本的python环境（源码编译）所以需要安装编译python的环境。

12yum install -y git zlib zlib-devel libffi-devel openssl openssl-devel readline-devel bzip2-devel sqlite-develcurl https://pyenv.run | bash

创建虚拟环境
安装python2.7.18的虚拟环境, 此环境只给fabric用, 所以就没有添加到环境变量, 以免影响其他python程序

123yum install sqlite-devel bzip2-devel readline-devel/root/.pyenv/bin/pyenv insta ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/33420276/" title="linux磁盘扩容(非LVM)"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/images/202211041307268.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="linux磁盘扩容(非LVM)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/33420276/" title="linux磁盘扩容(非LVM)">linux磁盘扩容(非LVM)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-21T05:38:44.000Z" title="发表于 2021-05-21 13:38:44">2021-05-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/devops/">devops</a></span></div><div class="content">LVM是Logical Volume Manager的缩写，中文逻辑卷管理，LVM是建立在磁盘分区和文件系统之间的一个逻辑层，LVM会更加灵活，可以动态扩容缩容分区大小。调整分区大小有风险，请做好充分测试再决定是否执行。如果启用了lvm，请查看LVM逻辑卷管理那么怎么知道机器有没有启用LVM呢，可以执行sudo lvdisplay查看有没有已存在的LV，lsblk查看现有的文件系统有没有LVM

网上查到的方法都是使用fdisk删除分区后再重新创建, 这种方式会有安全问题, 而growpart命令是安全的.

扩容器查看容量大小123[root@elk4 ~]# df -hFilesystem      Size  Used Avail Use% Mounted on/dev/vdb1       985G  165G  770G  18% /data


如果你要扩容的路径对应的Filesystem不是/dev/sdx请不要看这篇文章

先增加硬盘容量
需要growpart命令, 没有请安装

Ubuntu和DebianCentOS和Fedora1sudo apt install c ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/f4ea28c3/" title="LVM逻辑卷管理"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LVM逻辑卷管理"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/f4ea28c3/" title="LVM逻辑卷管理">LVM逻辑卷管理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-11T14:24:43.000Z" title="发表于 2021-05-11 22:24:43">2021-05-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/devops/">devops</a></span></div><div class="content">LVM是Logical Volume Manager的缩写，中文逻辑卷管理，LVM是建立在磁盘分区和文件系统之间的一个逻辑层，LVM会更加灵活，可以动态扩容缩容分区大小。调整分区大小有风险，请做好充分测试再决定是否执行。如果没有启用lvm，请查看linux磁盘扩容 - 非LVM那么怎么知道机器有没有启用LVM呢，可以执行sudo lvdisplay查看有没有已存在的LV，对比df -hT里面的Filesystem，也可以用lsblk查看有没有lvm。
LVM 的一些概念PV：    物理卷，比如一个分区，一个磁盘VG：    卷组，将多个PV整合在一起，形成一个大的池子LV：    逻辑卷，从VG划分出来一个个空间，可以当作分区来看待，可以格式化，可以挂载
常用命令


查看
扩展
创建



vgdisplay(vgs)
vgextend
vgcreate


lvdisplay(lvs)
lvextend
lvcreate


pvdisplay(pvs)
–
pvcreate


扩容文件系统物理扩容
虚拟机扩容就是扩容虚拟磁盘，物理机扩容比如可以增加硬盘。

创建新的PV扩展现 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/b1ffa547/" title="adb常用操作记录"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/images/202211041307268.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="adb常用操作记录"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/b1ffa547/" title="adb常用操作记录">adb常用操作记录</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-08T03:09:39.000Z" title="发表于 2021-05-08 11:09:39">2021-05-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/devops/">devops</a></span></div><div class="content">卸载无法卸载的系统应用
adb shell pm uninstall –user 0 com.miui.systemAdSolution
等同于
adb shellpm uninstall –user 0 com.miui.systemAdSolution

查询包名1adb shell pm list packages

卸载
以小米11 MIUI12.5 为例:

1234567891011121314151617# 小米系统广告解决方案adb shell pm uninstall --user 0 com.miui.systemAdSolution# 小米广告分析adb shell pm uninstall --user 0 com.miui.analytics# 小米游戏中心服务adb shell pm uninstall --user 0 com.xiaomi.gamecenter.sdk.service# bug反馈adb shell pm uninstall --user 0 com.miui.bugreport# 快应用服务框架adb shell pm uninstal ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/526ffc9a/" title="使用kubeadm部署一套高可用k8s集群 for Ubuntu"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/images/202211212221065.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用kubeadm部署一套高可用k8s集群 for Ubuntu"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/526ffc9a/" title="使用kubeadm部署一套高可用k8s集群 for Ubuntu">使用kubeadm部署一套高可用k8s集群 for Ubuntu</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-01T09:18:48.000Z" title="发表于 2021-05-01 17:18:48">2021-05-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Kubernetes/">Kubernetes</a></span></div><div class="content">
基于ubuntu使用kubeadm搭建集群， centos部署文档, 有疑问的地方可以看官方文档

准备机器
我的机器详情如下, 配置至少为4C4G




hostname
IP
作用



public
10.0.0.3
ingress、apiserver负载均衡，nfs存储


master1
10.0.0.11
k8s master节点


master2
10.0.0.12
k8s master节点


master3
10.0.0.13
k8s master节点


worker1
10.0.0.21
k8s worker节点


worker2
10.0.0.22
k8s worker节点


每台机器都做域名解析，或者绑定hosts(可选但建议)
123456vim /etc/hosts10.0.0.3  public kube-apiserver10.0.0.11 master110.0.0.12 master210.0.0.13 master3

基础环境配置
基础环境是不管master还是worker都需要的环境


禁用swap
确保每个节点上 MAC 地址和 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/c43764dd/" title="alpine常用配置"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/images/202211041307268.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="alpine常用配置"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/c43764dd/" title="alpine常用配置">alpine常用配置</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-27T15:03:34.000Z" title="发表于 2021-04-27 23:03:34">2021-04-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/devops/">devops</a></span></div><div class="content">安装telnet命令
1apk add busybox-extras busybox

清华源
1sed -i &#x27;s/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g&#x27; /etc/apk/repositories

安装常用工具
1apk add vim python3 git

alpine 默认的是ash shell
1vim ~/.profile

alpine服务管理工具12345查看所有服务rc-service --list添加开机自启动rc-update add &#123;service-name&#125;

网络配置123456789101112dns/etc/resolv.conf网卡配置文件/etc/network/interfaceiface eth0 inet static    address 192.168.1.150    netmask 255.255.255.0    gateway 192.168.1.1或者iface eth0 inet dhcp
</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/518e617c/" title="git常用操作记录"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="git常用操作记录"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/518e617c/" title="git常用操作记录">git常用操作记录</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-27T15:03:29.000Z" title="发表于 2021-04-27 23:03:29">2021-04-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/devops/">devops</a></span></div><div class="content">配置文件查看GIT本地配置1git config --list

编辑git配置文件1git config --global --edit

设置GIT用户信息12git config --global user.name &quot;zhanglikun&quot;git config --global user.email &quot;iuxt@qq.com&quot;

git记住密码1git config --global credential.helper store

配置文件~/.gitconfig内容12345[user]        name = zhanglikun        email = iuxt@qq.com[credential]        helper = store

忽略追踪文件权限
建议windows代码使用

1git config core.filemode false

分支管理


命令
作用



git branch -a
查看所有分支


git branch -r
查看远程分支


git fetch
更新索引


git  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/280100fb/" title="Linux平台文本编辑器vim"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux平台文本编辑器vim"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/280100fb/" title="Linux平台文本编辑器vim">Linux平台文本编辑器vim</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-21T07:54:57.000Z" title="发表于 2021-04-21 15:54:57">2021-04-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/devops/">devops</a></span></div><div class="content">
替换文本123:%s#原文本#替换后的文本#g:%s/原文本/替换后的文本/g:%s@原文本@替换后的文本@g

匹配删除删除包含特定字符的行
12:g/pattern/d            # 全局范围内:1,20g/pattern/d        # 删除1~20行内匹配的行

删除以#开头的注释
1g/^#/d

删除空行
1g/^\s*$/d

删除#后面的行
1g/#.*/d

删除不匹配的行
12:v/pattern/d:g!/pattern/d


patton里面可以是正则表达式，比如说 ^10.104

每一行最后添加一个字符1:%s/$/,/

用sudo打开1:w !sudo tee %

常用快捷键


快捷键
说明



i
在当前光标之前插入


a
在当前光标之后插入


I
在当前行 最前面插入


o
在下方新建一行, 然后插入


O
在上方新建一行, 然后插入kao


G
跳到最后面


gg
跳到最前面


$
跳到行尾


^
跳到行首


v
多选


ctrl v
块选


V
行选


yy
复制一行


p
在光标后粘贴


 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/18/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/#content-inner">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/#content-inner">20</a><a class="extend next" rel="next" href="/page/20/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">wentao</div><div class="author-info__description">文涛的博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">200</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">185</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Mr-wentao"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Mr-wentao/blog-hexo" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">此博客为我记录运维工作总结所用，供网友阅读参考，如有侵权，请通知我，我会核实后进行处理。
</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/a6ed320f/" title="腾讯云tke-ingress开启ingress域名访问日志">腾讯云tke-ingress开启ingress域名访问日志</a><time datetime="2024-01-08T08:57:21.802Z" title="发表于 2024-01-08 16:57:21">2024-01-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/49c855ea/" title="k8s配置ingress访问集群外部资源">k8s配置ingress访问集群外部资源</a><time datetime="2024-01-08T08:55:12.198Z" title="发表于 2024-01-08 16:55:12">2024-01-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/e53e29f0/" title="k8s常用操作命令">k8s常用操作命令</a><time datetime="2024-01-08T06:41:33.624Z" title="发表于 2024-01-08 14:41:33">2024-01-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/f8409f7f/" title="prometheus监控部署及常规组件">prometheus监控部署及常规组件</a><time datetime="2024-01-08T03:20:59.247Z" title="发表于 2024-01-08 11:20:59">2024-01-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/lr0clio1/" title="获取Kubernetes的token">获取Kubernetes的token</a><time datetime="2024-01-05T08:02:08.000Z" title="发表于 2024-01-05 16:02:08">2024-01-05</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kubernetes/"><span class="card-category-list-name">Kubernetes</span><span class="card-category-list-count">43</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/devops/"><span class="card-category-list-name">devops</span><span class="card-category-list-count">111</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/"><span class="card-category-list-name">工具</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%BC%80%E5%8F%91/"><span class="card-category-list-name">开发</span><span class="card-category-list-count">15</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="card-category-list-name">数据库</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%97%A5%E5%BF%97/"><span class="card-category-list-name">日志</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%9B%91%E6%8E%A7/"><span class="card-category-list-name">监控</span><span class="card-category-list-count">8</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Python/" style="font-size: 1.43em; color: #99a6b8">Python</a> <a href="/tags/Hyper-V/" style="font-size: 1.1em; color: #999">Hyper-V</a> <a href="/tags/database/" style="font-size: 1.14em; color: #999a9c">database</a> <a href="/tags/Blog/" style="font-size: 1.14em; color: #999a9c">Blog</a> <a href="/tags/HA/" style="font-size: 1.25em; color: #999fa7">HA</a> <a href="/tags/vagrant/" style="font-size: 1.1em; color: #999">vagrant</a> <a href="/tags/Flask/" style="font-size: 1.14em; color: #999a9c">Flask</a> <a href="/tags/Nginx/" style="font-size: 1.46em; color: #99a8bc">Nginx</a> <a href="/tags/%E8%AE%B0%E5%BD%95/" style="font-size: 1.17em; color: #999ca0">记录</a> <a href="/tags/%E6%B3%A8%E5%86%8C%E8%A1%A8/" style="font-size: 1.1em; color: #999">注册表</a> <a href="/tags/Bash/" style="font-size: 1.17em; color: #999ca0">Bash</a> <a href="/tags/%E6%97%B6%E9%97%B4/" style="font-size: 1.14em; color: #999a9c">时间</a> <a href="/tags/shell/" style="font-size: 1.21em; color: #999da3">shell</a> <a href="/tags/Prometheus/" style="font-size: 1.32em; color: #99a2ae">Prometheus</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/" style="font-size: 1.17em; color: #999ca0">数据迁移</a> <a href="/tags/prometheus/" style="font-size: 1.39em; color: #99a5b5">prometheus</a> <a href="/tags/pyotp/" style="font-size: 1.14em; color: #999a9c">pyotp</a> <a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 1.17em; color: #999ca0">编译</a> <a href="/tags/docker/" style="font-size: 1.17em; color: #999ca0">docker</a> <a href="/tags/Linux/" style="font-size: 1.5em; color: #99a9bf">Linux</a> <a href="/tags/k8s%E9%85%8D%E7%BD%AEingress%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4%E5%A4%96%E9%83%A8%E8%B5%84%E6%BA%90/" style="font-size: 1.14em; color: #999a9c">k8s配置ingress访问集群外部资源</a> <a href="/tags/Android/" style="font-size: 1.14em; color: #999a9c">Android</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.21em; color: #999da3">网络</a> <a href="/tags/PowerShell/" style="font-size: 1.1em; color: #999">PowerShell</a> <a href="/tags/Auth/" style="font-size: 1.32em; color: #99a2ae">Auth</a> <a href="/tags/GUI/" style="font-size: 1.14em; color: #999a9c">GUI</a> <a href="/tags/PHP/" style="font-size: 1.17em; color: #999ca0">PHP</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/" style="font-size: 1.1em; color: #999">虚拟化</a> <a href="/tags/mysql/" style="font-size: 1.21em; color: #999da3">mysql</a> <a href="/tags/Ansible/" style="font-size: 1.14em; color: #999a9c">Ansible</a> <a href="/tags/Script/" style="font-size: 1.35em; color: #99a3b1">Script</a> <a href="/tags/samba/" style="font-size: 1.14em; color: #999a9c">samba</a> <a href="/tags/ElasticSearch/" style="font-size: 1.21em; color: #999da3">ElasticSearch</a> <a href="/tags/binlog/" style="font-size: 1.14em; color: #999a9c">binlog</a> <a href="/tags/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" style="font-size: 1.17em; color: #999ca0">权限管理</a> <a href="/tags/ingress/" style="font-size: 1.28em; color: #99a0aa">ingress</a> <a href="/tags/%E7%9B%91%E6%8E%A7/" style="font-size: 1.17em; color: #999ca0">监控</a> <a href="/tags/Kernel/" style="font-size: 1.14em; color: #999a9c">Kernel</a> <a href="/tags/ACK/" style="font-size: 1.14em; color: #999a9c">ACK</a> <a href="/tags/Log/" style="font-size: 1.14em; color: #999a9c">Log</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><span class="card-archive-list-count">5</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">200</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-01-11T10:26:52.480Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href='https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral'>
  本网站由<img src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src='https://static.zahui.fan/images/202210272253029.svg' alt='又拍云' width='70' height='28' style="vertical-align:bottom">
  提供CDN加速/云存储服务
</a>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('/pluginsSrc/typed.js/dist/typed.umd.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["欲穷千里目，更上一层楼。","学而不思则罔，思而不学则殆。"])
  } else {
    document.getElementById("subtitle").textContent = "欲穷千里目，更上一层楼。"
  }
}
typedJSFn.run(subtitleType)</script></div><canvas class="fireworks" mobile="false"></canvas><script src="/pluginsSrc/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="/pluginsSrc/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>